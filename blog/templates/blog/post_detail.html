{% extends 'blog/base.html' %}
{% block title %}{{ post.title }} - My Minimal Blog{% endblock %}

{% block content %}
  <article>
    <h2>{{ post.title }}</h2>
    <p><small>By {{ post.author }} â€¢ {{ post.created|date:"F j, Y" }}</small></p>
    {% if post.image %}
      <img src="{{ post.image.url }}" alt="Image for {{ post.title }}">
    {% endif %}
    <div>
      {{ post.body|linebreaks }}
    </div>
  </article>

  <div class="adsense">
    <!-- Google AdSense placeholder -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-XXXXXXX"
         data-ad-slot="XXXXXXX"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
  </div>

  <section>
    <h3>Comments</h3>
  
    {% for comment in comments %}
      <p><strong>{{ comment.user.username }}</strong> says:</p>
      <p>{{ comment.body }}</p>
      <hr>
    {% empty %}
      <p>No comments yet.</p>
    {% endfor %}
  
    {% if user.is_authenticated %}
      <h4>Leave a comment</h4>
      {% if new_comment %}
        <p>Thanks! Your comment will appear once approved.</p>
      {% else %}
        <form method="post">
          {% csrf_token %}
          {{ form.as_p }}
          <button type="submit">Post Comment</button>
        </form>
      {% endif %}
    {% else %}
      <p><a href="{% url 'login' %}?next={{ request.path }}">Log in to comment</a></p>
    {% endif %}
  </section>
  
{% endblock %}
